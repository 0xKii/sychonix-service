---
layout: '~/layouts/MarkdownLayout.astro'
title: Bridge Node
network: Testnet
icon: celestia
chain: blockspacerace
version: v0.8.0
---

### Hardware requirements

The following requirements are recommended for running Defund:

- 4 or more physical CPU cores
- At least 200GB of SSD disk storage
- At least 8GB of memory (RAM)
- At least 100mbps network bandwidth


### Install dependencies Required

```
sudo apt update && sudo apt upgrade -y && sudo apt install curl tar wget clang pkg-config libssl-dev jq build-essential bsdmainutils git make ncdu gcc git jq chrony liblz4-tool -y
```

### Install go

We are gonna use GO Version 1.19.5
If you already have GO installed you can skip this 

```
ver="1.19.1"
cd $HOME
wget "https://golang.org/dl/go$ver.linux-amd64.tar.gz"
sudo rm -rf /usr/local/go
sudo tar -C /usr/local -xzf "go$ver.linux-amd64.tar.gz"
rm "go$ver.linux-amd64.tar.gz"
echo "export PATH=$PATH:/usr/local/go/bin:$HOME/go/bin" >> ~/.bash_profile
source ~/.bash_profile
go version
```

### Install binary

```
cd $HOME 
rm -rf celestia-node 
git clone https://github.com/celestiaorg/celestia-node.git 
cd celestia-node
git checkout v0.8.0
make build
sudo mv build/celestia /usr/local/bin
make cel-key
sudo mv cel-key /usr/local/bin
```

### Add Wallet

Create new wallet

```
cel-key add bridge-wallet --node.type bridge --p2p.network blockspacerace
```

Recover existing wallet

```
cel-key add bridge-wallet --node.type bridge --p2p.network blockspacerace --recover
```

### Init Bridge

```
celestia bridge init \
  --keyring.accname bridge-wallet \
  --core.ip localhost \
  --core.rpc.port 20657 \
  --core.grpc.port 20090 \
  --p2p.network blockspacerace \
  --rpc.port 20658 \
  --gateway.port 20659
  ```

### Create Service
```
sudo tee /etc/systemd/system/celestia-bridge.service > /dev/null << EOF
[Unit]
Description=Celestia Bridge Node service
After=network-online.target

[Service]
User=$USER
ExecStart=$(which celestia) bridge start \\
--keyring.accname bridge-wallet \\
--core.ip localhost \\
--core.rpc.port 20657 \\
--core.grpc.port 20090 \\
--p2p.network blockspacerace \\
--rpc.port 20658 \\
--gateway.port 20659 \\
--metrics.tls=false \\
--metrics \\
--metrics.endpoint otel.celestia.tools:4318 
Restart=on-failure
RestartSec=10
LimitNOFILE=65535

[Install]
WantedBy=multi-user.target
EOF
sudo systemctl daemon-reload
sudo systemctl enable celestia-bridge
```

### Start Node

```
systemctl restart celestia-bridge
```

Check Logs 
```
journalctl -fu celestia-bridge -o cat
```

### Useful Commands

Get node id
```
AUTH_TOKEN=$(celestia bridge auth admin --p2p.network blockspacerace)
curl -s -X POST -H "Authorization: Bearer $AUTH_TOKEN" -H 'Content-Type: application/json' -d '{"jsonrpc":"2.0","id":0,"method":"p2p.Info","params":[]}' http://localhost:20658 | jq -r .result.ID
```

